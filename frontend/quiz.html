<!DOCTYPE html>
<html class="h-full" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Placement Screening Module</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#5B13ec",
                        "background-light": "#f6f6f8",
                        "background-dark": "#161022"
                    },
                    fontFamily: {
                        display: "Lexend"
                    },
                    borderRadius: {
                        DEFAULT: "0.25rem",
                        lg: "0.5rem",
                        xl: "0.75rem",
                        full: "9999px"
                    }
                }
            }
        };
    </script>
    <style type="text/tailwindcss">
        body {
            font-family: 'Lexend', sans-serif;
            @apply h-full overflow-hidden;
        }
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #e2e8f0;
            border-radius: 10px;
        }
        .dark .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #2d3748;
        }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-white flex flex-col">
    <header
        class="h-16 shrink-0 border-b border-slate-200 dark:border-[#283039] bg-white dark:bg-background-dark px-6 flex items-center justify-between z-50">
        <div class="flex items-center gap-4">
            <div class="size-9 bg-primary rounded flex items-center justify-center text-white">
                <span class="material-symbols-outlined text-[22px]">shield_with_heart</span>
            </div>
            <h2 class="text-xl font-bold leading-tight tracking-tight">Placement Screening</h2>
        </div>
        <nav class="flex items-center gap-2 h-full">
            <a class="px-5 h-full flex items-center text-sm font-semibold border-b-2 border-primary text-primary"
                href="#">Aptitude</a>
            <a class="px-5 h-full flex items-center text-sm font-medium text-slate-500 hover:text-primary transition-colors border-b-2 border-transparent"
                href="#">Coding</a>
            <a class="px-5 h-full flex items-center text-sm font-medium text-slate-500 hover:text-primary transition-colors border-b-2 border-transparent"
                href="#">Verbal Ability</a>
        </nav>
        <div class="flex items-center gap-4">
            <div class="flex gap-2">
                <button
                    class="p-2 rounded-lg bg-slate-100 dark:bg-[#283039] text-slate-600 dark:text-white hover:bg-slate-200 dark:hover:bg-slate-700 transition-all">
                    <span class="material-symbols-outlined">settings</span>
                </button>
                <button
                    class="p-2 rounded-lg bg-slate-100 dark:bg-[#283039] text-slate-600 dark:text-white hover:bg-slate-200 dark:hover:bg-slate-700 transition-all">
                    <span class="material-symbols-outlined">help_center</span>
                </button>
            </div>
            <div class="size-10 rounded-full border-2 border-primary overflow-hidden">
                <img alt="Candidate profile portrait" class="w-full h-full object-cover"
                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuBsqYljm_ANmuHTwjbTTKJ8cpshfUy8NskM1I64cLA0JcYmt2cerM7mk4G0cBodzekkInhXoW7Oa4m5xFwFU6C1V7dk5XilYU028s2rfAkhzT0sBh8rFbsT45uJstOuT-kvS7em1swZF7086bllecV_BjFRWrFsmaBZq63FoXwvBADMbgnnH3bnnAiFLuG5dpKt-qFN-PsjjGsa_kPlJJEpbtcWdhEAGiFLLSR_YGww5Mq3OuWRdT-usvIGW_LQIUGTyiG7PVDC" />
            </div>
        </div>
    </header>
    <main class="flex-1 flex overflow-hidden">
        <aside
            class="w-80 shrink-0 border-r border-slate-200 dark:border-[#283039] bg-white dark:bg-background-dark flex flex-col h-full">
            <div class="flex-1 overflow-y-auto p-6 space-y-8 custom-scrollbar">
                <div class="space-y-2">
                    <h1 class="text-base font-semibold">Section Progress</h1>
                    <div class="flex items-center justify-between text-sm">
                        <span class="text-slate-500 dark:text-[#9dabb9]">5 of 15 Answered</span>
                        <span class="text-primary font-bold">33%</span>
                    </div>
                    <div class="w-full h-2 bg-slate-100 dark:bg-[#283039] rounded-full overflow-hidden">
                        <div class="bg-primary h-full w-[33%]"></div>
                    </div>
                </div>
                <div class="space-y-3">
                    <p class="text-xs font-bold uppercase tracking-wider text-slate-400">Remaining Time</p>
                    <div class="flex gap-2">
                        <div class="flex-1 flex flex-col items-center gap-1">
                            <div
                                class="w-full h-14 flex items-center justify-center rounded-lg bg-slate-100 dark:bg-[#283039] border border-slate-200 dark:border-[#384451]">
                                <span class="text-2xl font-bold font-mono">00</span>
                            </div>
                            <span class="text-[10px] text-slate-500 uppercase font-medium">Hours</span>
                        </div>
                        <div class="flex-1 flex flex-col items-center gap-1">
                            <div
                                class="w-full h-14 flex items-center justify-center rounded-lg bg-primary/10 border border-primary/30">
                                <span class="text-2xl font-bold font-mono text-primary">45</span>
                            </div>
                            <span class="text-[10px] text-primary uppercase font-bold">Minutes</span>
                        </div>
                        <div class="flex-1 flex flex-col items-center gap-1">
                            <div
                                class="w-full h-14 flex items-center justify-center rounded-lg bg-slate-100 dark:bg-[#283039] border border-slate-200 dark:border-[#384451]">
                                <span class="text-2xl font-bold font-mono">18</span>
                            </div>
                            <span class="text-[10px] text-slate-500 uppercase font-medium">Seconds</span>
                        </div>
                    </div>
                </div>
                <div class="space-y-4">
                    <p class="text-xs font-bold uppercase tracking-wider text-slate-400">Question Palette</p>
                    <div class="grid grid-cols-5 gap-2">
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-primary text-white cursor-pointer ring-2 ring-primary ring-offset-2 ring-offset-white dark:ring-offset-background-dark">
                            12</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-emerald-500 text-white cursor-pointer">
                            01</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-emerald-500 text-white cursor-pointer">
                            02</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-emerald-500 text-white cursor-pointer">
                            03</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-emerald-500 text-white cursor-pointer">
                            04</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-emerald-500 text-white cursor-pointer">
                            05</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-emerald-500 text-white cursor-pointer">
                            06</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-emerald-500 text-white cursor-pointer">
                            07</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-emerald-500 text-white cursor-pointer">
                            08</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-emerald-500 text-white cursor-pointer">
                            09</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-emerald-500 text-white cursor-pointer">
                            10</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-emerald-500 text-white cursor-pointer">
                            11</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-slate-100 dark:bg-[#283039] text-slate-400 cursor-pointer">
                            13</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-slate-100 dark:bg-[#283039] text-slate-400 cursor-pointer">
                            14</div>
                        <div
                            class="aspect-square flex items-center justify-center text-xs font-bold rounded-lg bg-amber-500 text-white cursor-pointer">
                            15</div>
                    </div>
                    <div class="pt-4 space-y-2 border-t border-slate-100 dark:border-slate-800">
                        <div class="flex items-center gap-2 text-xs">
                            <span class="size-3 rounded bg-emerald-500"></span>
                            <span class="text-slate-500">Answered (11)</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <span class="size-3 rounded bg-amber-500"></span>
                            <span class="text-slate-500">Marked for Review (1)</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <span class="size-3 rounded bg-slate-100 dark:bg-[#283039]"></span>
                            <span class="text-slate-500">Not Visited (3)</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="p-6 border-t border-slate-100 dark:border-slate-800">
                <button
                    class="w-full flex items-center justify-center gap-2 rounded-lg py-3 bg-red-500/10 hover:bg-red-500/20 text-red-500 text-sm font-bold transition-all border border-red-500/30">
                    <span class="material-symbols-outlined text-sm">logout</span>
                    End Test Session
                </button>
            </div>
        </aside>
        <section class="flex-1 flex flex-col bg-slate-50 dark:bg-[#0c1219] overflow-hidden relative">
            <div class="flex-1 overflow-y-auto custom-scrollbar">
                <div class="max-w-5xl mx-auto px-12 py-12 space-y-10">
                    <div class="space-y-6">
                        <div class="flex items-center gap-3">
                            <span
                                class="px-3 py-1 bg-primary/10 text-primary text-xs font-bold rounded-full uppercase tracking-wider">Logical
                                Reasoning</span>
                            <span class="text-slate-300 dark:text-slate-700 font-light">|</span>
                            <span class="text-slate-500 text-xs font-medium">Complexity: Medium</span>
                            <span class="text-slate-300 dark:text-slate-700 font-light">|</span>
                            <span class="text-slate-500 text-xs font-medium">Score: +4, -1</span>
                        </div>
                        <div class="space-y-4">
                            <h3 class="text-3xl font-bold leading-tight text-slate-900 dark:text-white">Question 12:
                                Deductive Logic</h3>
                            <div
                                class="p-6 bg-white dark:bg-slate-900/50 rounded-2xl border border-slate-200 dark:border-slate-800">
                                <p class="text-xl text-slate-700 dark:text-slate-300 font-light leading-relaxed">
                                    If all cats are animals and some animals are pets, which of the following
                                    conclusions must be true according to the Venn diagram logic? Consider the
                                    intersection of sets carefully.
                                    <br /><br />
                                    Note: "Must be true" implies a logical necessity in all possible interpretations of
                                    the premises.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 gap-4 max-w-3xl">
                        <label
                            class="group flex items-center p-5 rounded-2xl border-2 border-slate-200 dark:border-[#283039] bg-white dark:bg-[#111418] cursor-pointer transition-all hover:border-primary/40 hover:bg-slate-50 dark:hover:bg-slate-900/50">
                            <div
                                class="size-7 border-2 border-slate-300 rounded-full flex items-center justify-center group-hover:border-primary/50 shrink-0">
                                <div class="size-3.5 bg-transparent rounded-full"></div>
                            </div>
                            <div class="ml-5 flex-1">
                                <p class="text-slate-800 dark:text-slate-200 text-lg font-medium">All pets are cats</p>
                            </div>
                            <span
                                class="text-slate-400 group-hover:text-primary transition-colors font-bold uppercase text-xs tracking-widest">A</span>
                        </label>
                        <label
                            class="group flex items-center p-5 rounded-2xl border-2 border-primary bg-primary/5 dark:bg-primary/5 cursor-pointer transition-all shadow-sm">
                            <div
                                class="size-7 border-2 border-primary rounded-full flex items-center justify-center shrink-0">
                                <div class="size-3.5 bg-primary rounded-full"></div>
                            </div>
                            <div class="ml-5 flex-1">
                                <p class="text-slate-800 dark:text-slate-200 text-lg font-bold">Some animals are not
                                    pets</p>
                            </div>
                            <span
                                class="text-primary font-bold uppercase text-xs tracking-widest bg-primary/10 px-2 py-1 rounded">Selected</span>
                        </label>
                        <label
                            class="group flex items-center p-5 rounded-2xl border-2 border-slate-200 dark:border-[#283039] bg-white dark:bg-[#111418] cursor-pointer transition-all hover:border-primary/40 hover:bg-slate-50 dark:hover:bg-slate-900/50">
                            <div
                                class="size-7 border-2 border-slate-300 rounded-full flex items-center justify-center group-hover:border-primary/50 shrink-0">
                                <div class="size-3.5 bg-transparent rounded-full"></div>
                            </div>
                            <div class="ml-5 flex-1">
                                <p class="text-slate-800 dark:text-slate-200 text-lg font-medium">Some cats are
                                    definitely pets</p>
                            </div>
                            <span
                                class="text-slate-400 group-hover:text-primary transition-colors font-bold uppercase text-xs tracking-widest">C</span>
                        </label>
                        <label
                            class="group flex items-center p-5 rounded-2xl border-2 border-slate-200 dark:border-[#283039] bg-white dark:bg-[#111418] cursor-pointer transition-all hover:border-primary/40 hover:bg-slate-50 dark:hover:bg-slate-900/50">
                            <div
                                class="size-7 border-2 border-slate-300 rounded-full flex items-center justify-center group-hover:border-primary/50 shrink-0">
                                <div class="size-3.5 bg-transparent rounded-full"></div>
                            </div>
                            <div class="ml-5 flex-1">
                                <p class="text-slate-800 dark:text-slate-200 text-lg font-medium">None of the above</p>
                            </div>
                            <span
                                class="text-slate-400 group-hover:text-primary transition-colors font-bold uppercase text-xs tracking-widest">D</span>
                        </label>
                    </div>
                </div>
            </div>
            <footer
                class="shrink-0 h-20 bg-white dark:bg-background-dark px-10 flex items-center justify-between border-t border-slate-200 dark:border-[#283039] z-50">
                <div class="flex items-center gap-4">
                    <button
                        class="flex items-center gap-2 px-6 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 text-sm font-semibold transition-all">
                        <span class="material-symbols-outlined text-[18px]">arrow_back</span>
                        Previous
                    </button>
                    <button
                        class="flex items-center gap-2 px-8 py-2.5 rounded-lg bg-primary hover:bg-opacity-90 text-white text-sm font-bold shadow-lg shadow-primary/20 transition-all">
                        Save &amp; Next
                        <span class="material-symbols-outlined text-[18px]">arrow_forward</span>
                    </button>
                </div>
                <div class="flex items-center gap-2">
                    <button
                        class="flex items-center gap-2 px-4 py-2 text-slate-500 hover:text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-500/10 rounded-lg text-sm font-medium transition-all group">
                        <span class="material-symbols-outlined text-[20px] group-hover:fill-current">bookmark</span>
                        Mark for Review
                    </button>
                    <div class="w-px h-6 bg-slate-200 dark:bg-slate-700 mx-2"></div>
                    <button
                        class="px-4 py-2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 rounded-lg text-sm font-medium transition-all">
                        Clear Response
                    </button>
                </div>
                <div class="flex items-center">
                    <button
                        class="flex items-center gap-2 px-8 py-2.5 rounded-lg bg-primary text-white hover:bg-opacity-90 text-sm font-bold shadow-lg shadow-primary/20 transition-all">
                        <span class="material-symbols-outlined text-[18px]">send</span>
                        Submit Final Test
                    </button>
                </div>
            </footer>
        </section>
    </main>

    <script src="api.js"></script>
    <script>
        const urlParams = new URL(window.location.href).searchParams;
        const section = urlParams.get('section') || 'aptitude';
        const user = JSON.parse(localStorage.getItem('user'));

        // Update UI based on section
        document.querySelector('h2.text-xl').innerText = section.charAt(0).toUpperCase() + section.slice(1) + ' Screening';
        document.querySelector('nav a.text-primary').innerText = section.charAt(0).toUpperCase() + section.slice(1);

        // Submit Logic
        const submitBtn = document.querySelectorAll('button').item(document.querySelectorAll('button').length - 1);
        submitBtn.onclick = async () => {
            if (!user) return alert('Please login first');

            submitBtn.innerText = 'Submitting...';

            // For demo, generate a high score (80-95)
            const score = Math.floor(Math.random() * 15) + 80;

            try {
                const currentData = await api.getStudentProfile(user._id);
                const updatedScores = { ...currentData.screeningScores };
                updatedScores[section.toLowerCase()] = score;

                await fetch(`http://localhost:3000/api/data/students/${user._id}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ screeningScores: updatedScores })
                });

                alert(`${section} Screening Completed! Score: ${score}%`);
                window.location.href = 'results.html';
            } catch (err) {
                console.error(err);
                alert('Submission failed');
                submitBtn.innerText = 'Submit Final Test';
            }
        };
    </script>
</body>

</html>